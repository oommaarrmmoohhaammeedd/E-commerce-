<section>
    <h1 class="text-center text-main my-2 text-light fw-bold">Forgot Password</h1>
    @if (step == 1) {
    <form [formGroup]="verifyEmail" class="bg-main-light shadow rounded-4 p-3" (ngSubmit)="verifyEmailSubmit()">
        <div class="my-2">
            <label class="fw-bold" for="email">email:</label>
            <input formControlName="email" type="email" id="email" class="form-control">
            @if (verifyEmail.get('email')?.errors && (verifyEmail.get('email')?.touched ||
            verifyEmail.get("email")?.dirty)) {
            <div class="alert alert-danger w-50">
                @if (verifyEmail.get('email')?.getError('required')) {
                <p>email is required !</p>
                }
                @else if (verifyEmail.get('email')?.getError('email')) {
                <p>Enter Valid Email</p>
                }
            </div>
            }
        </div>
        <button [disabled]="verifyEmail.invalid || isLoading" class="btn-main">Verify Email
            @if (isLoading == true) {
            <span><i class="fas fa-spin fa-spinner"></i></span>
            }
        </button>
    </form>
    }
    @else if (step == 2) {
    <form [formGroup]="verifyCode" class="bg-main-light shadow rounded-4 p-3" (ngSubmit)="verifyCodeSubmit()">
        <div class="my-2">
            <label class="fw-bold" for="resetCode">resetCode:</label>
            <input formControlName="resetCode" type="text" id="resetCode" class="form-control">
            @if (verifyCode.get('resetCode')?.errors && (verifyCode.get('resetCode')?.touched ||
            verifyCode.get("resetCode")?.dirty)) {
            <div class="alert alert-danger w-50">
                @if (verifyCode.get('resetCode')?.getError('required')) {
                <p>Code is required !</p>
                }
                @else if (verifyCode.get('resetCode')?.getError('pattern')) {
                <p>check your email inbox for Code</p>
                }
            </div>
            }
        </div>
        <button [disabled]="verifyCode.invalid || isLoading" class="btn-main">Verify Code
            @if (isLoading == true) {
            <span><i class="fas fa-spin fa-spinner"></i></span>
            }
        </button>
    </form>
    }
    @else if (step == 3) {
    <form [formGroup]="resetPassword" class="bg-main-light shadow rounded-4 p-3" (ngSubmit)="resetPasswordSubmit()">
        <div class="my-2">
            <label class="fw-bold" for="email">email:</label>
            <input formControlName="email" type="email" id="email" class="form-control">
            @if (verifyEmail.get('email')?.errors && (verifyEmail.get('email')?.touched ||
            verifyEmail.get("email")?.dirty)) {
            <div class="alert alert-danger w-50">
                @if (verifyEmail.get('email')?.getError('required')) {
                <p>email is required !</p>
                }
                @else if (verifyEmail.get('email')?.getError('email')) {
                <p>Enter Valid Email</p>
                }
            </div>
            }
        </div>

        <div class="my-2">
            <label class="fw-bold" for="newPassword">newPassword:</label>
            <input formControlName="newPassword" type="password" id="newPassword" class="form-control">
            @if (resetPassword.get('newPassword')?.errors && (resetPassword.get('newPassword')?.touched ||
            resetPassword.get("newPassword")?.dirty)) {
            <div class="alert alert-danger w-50">
                @if (resetPassword.get('newPassword')?.getError('required')) {
                <p>Password is required !</p>
                }
                @else if (resetPassword.get('newPassword')?.getError('pattern')) {
                <p>password must be at least 6 chars</p>
                }
            </div>
            }
        </div>
        <button [disabled]="resetPassword.invalid || isLoading" class="btn-main">Verify Email
            @if (isLoading == true) {
            <span><i class="fas fa-spin fa-spinner"></i></span>
            }
        </button>
    </form>
    }


</section>